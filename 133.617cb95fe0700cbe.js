"use strict";(self.webpackChunkpolity=self.webpackChunkpolity||[]).push([[133],{3133:(We,I,s)=>{s.r(I),s.d(I,{GROUP_ROUTES:()=>Qe});var v=s(6287),e=s(3953),f=s(945);const b=(o,c)=>{const t=(0,e.WQX)(f.J),r=(0,e.WQX)(v.Ix),i=t.isBoardMember;return console.log("isBoardMember: ",i()),!!i()||(r.navigate(["/home"]),!1)};var a=s(467),M=s(4602),C=s(800),m=s(2782);let Y=(()=>{class o{constructor(t,r){this.dialogService=t,this.context=r}accept(){this.context.completeWith("accept")}decline(){this.context.completeWith("decline")}static#e=this.\u0275fac=function(r){return new(r||o)(e.rXU(M.wX),e.rXU(C.su))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["polity-group-accept-decline-membership"]],standalone:!0,features:[e.aNF],decls:4,vars:2,consts:[["size","m","tuiButton","","type","button",3,"click"]],template:function(r,i){1&r&&(e.j41(0,"button",0),e.bIt("click",function(){return i.accept()}),e.EFF(1," Accept\n"),e.k0s(),e.j41(2,"button",0),e.bIt("click",function(){return i.decline()}),e.EFF(3," Decline\n"),e.k0s()),2&r&&(e.BMQ("data-cy","accept-button"),e.R7$(2),e.BMQ("data-cy","decline-button"))},dependencies:[m.Pv,m.SM]})}return o})();var p=s(1638),H=s(9702),z=s(6610),T=s(177);function Z(o,c){if(1&o){const t=e.RV6();e.j41(0,"button",1),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleFollow())}),e.EFF(1),e.k0s()}if(2&o){const t=e.XpG();e.AVh("tui-skeleton",t.isLoading()),e.BMQ("data-cy","request-button"),e.R7$(),e.SpI("",t.requestTitleString()," ")}}let ee=(()=>{class o{constructor(){this.isRequested=e.hFB.required(),this.requestNotPossible=(0,e.hFB)(!1),this.isLoading=e.hFB.required(),this.requestTitleString=(0,e.hFB)(""),this.toggledTitle=(0,e.hFB)(""),this.toggledFollowing=(0,e.CGW)()}toggleFollow(){this.toggledFollowing.emit(!this.isRequested)}static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["polity-request-button"]],inputs:{isRequested:[1,"isRequested"],requestNotPossible:[1,"requestNotPossible"],isLoading:[1,"isLoading"],requestTitleString:[1,"requestTitleString"],toggledTitle:[1,"toggledTitle"]},outputs:{toggledFollowing:"toggledFollowing"},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[["size","l","tuiButton","","type","button",1,"tui-form__button",3,"tui-skeleton"],["size","l","tuiButton","","type","button",1,"tui-form__button",3,"click"]],template:function(r,i){1&r&&e.DNE(0,Z,2,4,"button",0),2&r&&e.vxM(i.requestNotPossible()?-1:0)},dependencies:[T.MD,m.Pv,m.SM]})}return o})();var te=s(574),h=s(1803),re=s(7771),S=s(1844),u=s(6530),g=s(2298),oe=s(4886);let E=(()=>{class o extends S.W{constructor(){super({loading:!1,dataRequested:!1}),this.groupStore=(0,e.WQX)(p.f),this.groupCountersStore=(0,e.WQX)(h.N),this.groupMembershipStatusStore=(0,e.WQX)(f.J)}read(){var t=this;return(0,a.A)(function*(){const r=t.groupStore.data().id_;yield(0,u.h)({fn:"group_member_invitations_read",args:{_group_id:r}},{useLoading:!0,loadingState:t.loadingState_},{useStore:!0,dataState:t.data_},{useError:!0,errorStoreService:t.errorStoreService},{useSuccess:!1},{useExtractImgUrl:!0,key:"profile_image_",bucket:"profile_images"})})()}invite(t){var r=this;return(0,a.A)(function*(){const i=r.groupStore.data().id_;yield(0,u.h)({fn:"group_member_invitations_create",args:{_group_id:i,_member_id:t}},{useLoading:!1},{useStore:!1},{useError:!0,errorStoreService:r.errorStoreService},{useSuccess:!0,alertService:r.tuiAlertService,successMessage:"Group invitation sent!"})})()}accept(){var t=this;return(0,a.A)(function*(){const r=t.groupStore.data().id_;(yield(0,u.h)({fn:"accept_group_invitation_transaction",args:{_group_id:r}},{useLoading:!1},{useStore:!1},{useError:!0,errorStoreService:t.errorStoreService},{useSuccess:!0,alertService:t.tuiAlertService,successMessage:"Group invitation sent!"}))().error||(t.groupCountersStore.increment("group_member_counter_"),t.groupMembershipStatusStore.updateGroupMembershipStatus("member"))})()}acceptById(t){var r=this;return(0,a.A)(function*(){(yield(0,u.h)({fn:"accept_group_invitation_by_id_transaction",args:{_invitation_id:t}},{useLoading:!1},{useStore:!1},{useError:!0,errorStoreService:r.errorStoreService},{useSuccess:!0,alertService:r.tuiAlertService,successMessage:"Group invitation sent!"}))().error||((0,g.x)("id_",t,r.data_),r.groupMembershipStatusStore.updateGroupMembershipStatus("member"))})()}remove(t){var r=this;return(0,a.A)(function*(){(yield(0,u.h)({fn:"group_member_invitations_by_id_delete",args:{_invitation_id:t}},{useLoading:!1},{useStore:!1},{useError:!0,errorStoreService:r.errorStoreService},{useSuccess:!0,alertService:r.tuiAlertService,successMessage:"Group invitation revoked!"}))().error||(0,g.x)("id_",t,r.data_)})()}removeByInviter(t,r){var i=this;return(0,a.A)(function*(){const n=yield(0,oe.$)({fn:"group_member_invitations_delete_by_inviter",args:{_group_id:r,_member_id:t}},{useLoading:!1},{useStore:!1},{useError:!0,errorStoreService:i.errorStoreService},{useSuccess:!0,alertService:i.tuiAlertService,successMessage:"Group invitation canceled!"});if(!n().error&&void 0!==n().data?.id_){const d=n().data?.id_;(0,g.x)("id_",d,i.data_)}})()}decline(){var t=this;return(0,a.A)(function*(){const r=t.groupStore.data().id_;(yield(0,u.h)({fn:"group_member_invitations_delete",args:{_group_id:r}},{useLoading:!1},{useStore:!1},{useError:!0,errorStoreService:t.errorStoreService},{useSuccess:!0,alertService:t.tuiAlertService,successMessage:"Group invitation rejected!"}))().error||t.groupMembershipStatusStore.updateGroupMembershipStatus("no_member")})()}static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),k=(()=>{class o extends S.W{constructor(){super({loading:!1,dataRequested:!1}),this.groupStore=(0,e.WQX)(p.f),this.groupCounterStore=(0,e.WQX)(h.N),this.groupMembershipStatusStore=(0,e.WQX)(f.J)}read(){var t=this;return(0,a.A)(function*(){const r=t.groupStore.data().id_;yield(0,u.h)({fn:"group_member_requests_of_group_read",args:{_group_id:r}},{useLoading:!0,loadingState:t.loadingState_},{useStore:!0,dataState:t.data_},{useError:!0,errorStoreService:t.errorStoreService},{useSuccess:!1},{useExtractImgUrl:!0,key:"profile_image_",bucket:"profile_images"})})()}request(){var t=this;return(0,a.A)(function*(){const r=t.groupStore.data().id_;yield(0,u.h)({fn:"group_member_requests_create",args:{_group_id:r}},{useLoading:!0},{useStore:!1},{useError:!0,errorStoreService:t.errorStoreService},{useSuccess:!0,alertService:t.tuiAlertService,successMessage:"Request send!"}),t.groupMembershipStatusStore.updateGroupMembershipStatus("requested")})()}accept(t){var r=this;return(0,a.A)(function*(){(yield(0,u.h)({fn:"accept_group_membership_request_transaction",args:{_request_id:t}},{useLoading:!1},{useStore:!1},{useError:!0,errorStoreService:r.errorStoreService},{useSuccess:!0,alertService:r.tuiAlertService,successMessage:"Group membership accepted!"}))().error||((0,g.x)("id_",t,r.data_),r.groupCounterStore.increment("group_member_counter_"))})()}decline(t){var r=this;return(0,a.A)(function*(){yield(0,u.h)({fn:"group_member_requests_delete",args:{_group_id:t}},{useLoading:!0},{useStore:!1},{useError:!0,errorStoreService:r.errorStoreService},{useSuccess:!0,alertService:r.tuiAlertService,successMessage:"Group membership accepted!"})})()}withdraw(){var t=this;return(0,a.A)(function*(){const r=t.groupStore.data().id_;yield(0,u.h)({fn:"group_member_requests_delete",args:{_group_id:r}},{useLoading:!0},{useStore:!1},{useError:!0,errorStoreService:t.errorStoreService},{useSuccess:!0,alertService:t.tuiAlertService,successMessage:"Group membership accepted!"}),t.groupMembershipStatusStore.updateGroupMembershipStatus("no_member")})()}deleteById(t){var r=this;return(0,a.A)(function*(){yield(0,u.h)({fn:"group_member_requests_delete_by_id",args:{_request_id:t}},{useLoading:!1},{useStore:!1},{useError:!0,errorStoreService:r.errorStoreService},{useSuccess:!0,alertService:r.tuiAlertService,successMessage:"Group membership accepted!"}),(0,g.x)("id_",t,r.data_)})()}static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),R=(()=>{class o extends S.W{constructor(){super({loading:!1,dataRequested:!1}),this.groupStore=(0,e.WQX)(p.f),this.groupMembershipStatusStore=(0,e.WQX)(f.J),this.groupCounterStore=(0,e.WQX)(h.N)}read(){var t=this;return(0,a.A)(function*(){const r=t.groupStore.data().id_;yield(0,u.h)({fn:"group_members_of_group_read",args:{_group_id:r}},{useLoading:!0,loadingState:t.loadingState_},{useStore:!0,dataState:t.data_},{useError:!0,errorStoreService:t.errorStoreService},{useSuccess:!1},{useExtractImgUrl:!0,key:"profile_image_",bucket:"profile_images"})})()}leave(){var t=this;return(0,a.A)(function*(){const r=t.groupStore.data().id_;yield(0,u.h)({fn:"leave_group_member_transaction",args:{_group_id:r}},{useLoading:!1},{useStore:!1},{useError:!0,errorStoreService:t.errorStoreService},{useSuccess:!0,alertService:t.tuiAlertService,successMessage:"Group left!"}),t.groupMembershipStatusStore.updateGroupMembershipStatus("no_member"),t.groupCounterStore.decrement("group_member_counter_")})()}remove(t){var r=this;return(0,a.A)(function*(){yield(0,u.h)({fn:"leave_group_by_membership_id_transaction",args:{_membership_id:t}},{useLoading:!1},{useStore:!1},{useError:!0,errorStoreService:r.errorStoreService},{useSuccess:!0,alertService:r.tuiAlertService,successMessage:"Member removed"}),r.groupCounterStore.decrement("group_member_counter_"),(0,g.x)("id_",t,r.data_)})()}static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var ie=s(2748);let ne=(()=>{class o{constructor(t,r){this.dialogService=t,this.injector=r,this.groupStore=(0,e.WQX)(p.f),this.groupCounterStore=(0,e.WQX)(h.N),this.groupFollowStore=(0,e.WQX)(re.O),this.groupInvitationsStore=(0,e.WQX)(E),this.groupMembershipStatusStore=(0,e.WQX)(f.J),this.groupRequestsStore=(0,e.WQX)(k),this.groupMembersStore=(0,e.WQX)(R),this.buttonTextString="Request Membership",this.signal=e.vPA,this.dialog=this.dialogService.open(new C.lS(Y,this.injector),{dismissible:!0,label:"Heading"}),(0,e.QZP)(()=>{this.groupMembershipStatusStore.isNoMember()?this.buttonTextString="Request Membership":this.groupMembershipStatusStore.isMember()||this.groupMembershipStatusStore.isBoardMember()?this.buttonTextString="Leave Group":this.groupMembershipStatusStore.isRequested()?this.buttonTextString="Withdraw request":this.groupMembershipStatusStore.isInvited()&&(this.buttonTextString="Answer invitation")})}toggleFollow(t){var r=this;return(0,a.A)(function*(){t?yield r.groupFollowStore.follow():yield r.groupFollowStore.unFollow()})()}toggleMembership(t){var r=this;return(0,a.A)(function*(){r.groupMembershipStatusStore.isNoMember()?yield r.groupRequestsStore.request():r.groupMembershipStatusStore.isMember()||r.groupMembershipStatusStore.isBoardMember()?yield r.groupMembersStore.leave():r.groupMembershipStatusStore.isRequested()?yield r.groupRequestsStore.withdraw():r.groupMembershipStatusStore.isInvited()&&r.showDialog()})()}showDialog(){this.dialog.subscribe({next:t=>{console.info(`Dialog emitted data = ${t}`),"accept"===t?this.groupInvitationsStore.accept():"decline"===t&&this.groupInvitationsStore.decline()},complete:()=>{console.info("Dialog closed")}})}static#e=this.\u0275fac=function(r){return new(r||o)(e.rXU(M.wX),e.rXU(e.zZn))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["polity-group-wiki"]],standalone:!0,features:[e.aNF],decls:18,vars:23,consts:[[1,"polity-center","min-height"],[3,"isLoading","src"],[3,"firstName","isLoading"],[1,"polity-flex-container","polity-single-item-centered","tui-space_right-4","tui-space_left-4"],[1,"polity-flex-item-first",3,"counterTitle","counterValue","dataCyTag","isLoading"],[1,"tui-space_bottom-4"],[3,"toggledFollowing","isFollowing","isLoading","loadingState"],[3,"toggledFollowing","isLoading","isRequested","requestTitleString","toggledTitle"]],template:function(r,i){1&r&&(e.j41(0,"div",0),e.nrm(1,"polity-wiki-image",1)(2,"polity-wiki-headline",2),e.j41(3,"div",3),e.nrm(4,"polity-counter",4)(5,"polity-counter",4),e.k0s(),e.j41(6,"div",5)(7,"polity-follow-button",6),e.bIt("toggledFollowing",function(d){return i.toggleFollow(d)}),e.k0s()(),e.j41(8,"p"),e.EFF(9),e.k0s(),e.j41(10,"div",5)(11,"polity-request-button",7),e.bIt("toggledFollowing",function(d){return i.toggleMembership(d)}),e.k0s()(),e.j41(12,"p"),e.EFF(13),e.k0s(),e.j41(14,"p"),e.EFF(15),e.k0s(),e.j41(16,"p"),e.EFF(17),e.k0s()()),2&r&&(e.R7$(),e.Y8G("isLoading",i.groupStore.loadingState().loading)("src",i.groupStore.data().img_url_),e.R7$(),e.Y8G("firstName",i.groupStore.data().name_)("isLoading",i.groupStore.loadingState().loading),e.R7$(2),e.Y8G("counterTitle","Member")("counterValue",i.groupCounterStore.data().group_member_counter_)("dataCyTag","member-counter")("isLoading",i.groupCounterStore.loadingState().loading),e.R7$(),e.Y8G("counterTitle","Follower")("counterValue",i.groupCounterStore.data().follower_counter_)("dataCyTag","follower-counter")("isLoading",i.groupCounterStore.loadingState().loading),e.R7$(2),e.Y8G("isFollowing",i.groupFollowStore.data())("isLoading",i.groupFollowStore.loadingState().loading)("loadingState",i.groupFollowStore.loadingState()),e.R7$(2),e.JRh(i.groupFollowStore.data()),e.R7$(2),e.Y8G("isLoading",i.groupMembershipStatusStore.loadingState().loading)("isRequested",i.groupMembershipStatusStore.isMember())("requestTitleString",i.buttonTextString)("toggledTitle","REQUEST MEMBERSHIP"),e.R7$(2),e.SpI("",i.groupMembershipStatusStore.loadingState().loading,'"'),e.R7$(2),e.JRh(i.groupMembershipStatusStore.isMember()),e.R7$(2),e.SpI("",i.buttonTextString," "))},dependencies:[H.s,z.W,ee,te.S,ie.p]})}return o})();var l=s(4341),A=s(3478),_=s(5020),B=s(8974),P=s(936),j=s(6476);let se=(()=>{class o extends S.W{constructor(){super({loading:!0,dataRequested:!1}),this.groupStore=(0,e.WQX)(p.f),this.groupCounterStore=(0,e.WQX)(h.N)}read(){var t=this;return(0,a.A)(function*(){const r=t.groupStore.data().id_;yield(0,u.h)({fn:"followings_of_group_read",args:{_group_id:r}},{useLoading:!0,loadingState:t.loadingState_},{useStore:!0,dataState:t.data_},{useError:!0,errorStoreService:t.errorStoreService},{useSuccess:!1},{useExtractImgUrl:!0,key:"profile_image_",bucket:"profile_images"})})()}remove(t){var r=this;return(0,a.A)(function*(){(yield(0,u.h)({fn:"unfollow_group_transaction",args:{_following_id:t}},{useLoading:!1},{useStore:!1},{useError:!0,errorStoreService:r.errorStoreService},{useSuccess:!0,alertService:r.tuiAlertService,successMessage:"Followings of group loaded!"}))().error||((0,g.x)("id_",t,r.data_),r.groupCounterStore.decrement("following_counter_"))})()}static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),ae=(()=>{class o extends S.W{constructor(){super({loading:!0,dataRequested:!1}),this.groupStore=(0,e.WQX)(p.f),this.groupCounterStore=(0,e.WQX)(h.N)}read(){var t=this;return(0,a.A)(function*(){const r=t.groupStore.data().id_;yield(0,u.h)({fn:"followers_of_group_read",args:{_group_id:r}},{useLoading:!0,loadingState:t.loadingState_},{useStore:!0,dataState:t.data_},{useError:!0,errorStoreService:t.errorStoreService},{useSuccess:!1},{useExtractImgUrl:!0,key:"profile_image_",bucket:"profile_images"})})()}remove(t){var r=this;return(0,a.A)(function*(){const i=r.groupStore.data().id_;(yield(0,u.h)({fn:"remove_group_follower_transaction",args:{_follower_id:t,_group_id_in:i}},{useLoading:!1},{useStore:!1},{useError:!0,errorStoreService:r.errorStoreService},{useSuccess:!0,alertService:r.tuiAlertService,successMessage:"Followings of group loaded!"}))().error||((0,g.x)("id_",t,r.data_),r.groupCounterStore.decrement("follower_counter_"))})()}static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var x=s(4960);const L=()=>["last_name_"],le=()=>["follower_profile_image","follower_first_name","follower_remove"],ue=()=>["follower_profile_image_headline","follower_first_name_headline","follower_remove_headline"],N=()=>["profile_image_","first_name_","id_"],ce=()=>["Foto","test","Entfernen"],de=()=>["following_profile_image","following_first_name","following_remove"],pe=()=>["following_profile_image_headline","following_first_name_headline","following_remove_headline"],ge=()=>["Foto","Name","Entfernen"];function _e(o,c){if(1&o&&(e.qex(0,1),e.nrm(1,"polity-filter-string",6),e.bVm()),2&o){const t=e.XpG();e.Y8G("formGroup",t.combinedForm)}}function me(o,c){if(1&o){const t=e.RV6();e.j41(0,"polity-table-three-icon-text-delete",7),e.bIt("remove",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.removeFollower(i))})("openLink",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.onNavigateToProfile(i))}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("bonusKeys",e.lJ4(8,L))("dataCyTags",e.lJ4(9,le))("dataCyTagsHeadline",e.lJ4(10,ue))("dataKeysForColumns",e.lJ4(11,N))("data",t.followersOfGroupStore.dataFiltered())("headings",e.lJ4(12,ce))("isLoading",t.followersOfGroupStore.loadingState().loading)("linkKey","id_")}}function he(o,c){if(1&o){const t=e.RV6();e.j41(0,"polity-table-three-icon-text-delete",7),e.bIt("remove",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.removeFollowing(i))})("openLink",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.onNavigateToProfile(i))}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("bonusKeys",e.lJ4(8,L))("dataCyTags",e.lJ4(9,de))("dataCyTagsHeadline",e.lJ4(10,pe))("dataKeysForColumns",e.lJ4(11,N))("data",t.followingsOfGroupStore.dataFiltered())("headings",e.lJ4(12,ge))("isLoading",t.followingsOfGroupStore.loadingState().loading)("linkKey","id_")}}let fe=(()=>{class o{constructor(t){this.formBuilder=t,this.followingsOfGroupStore=(0,e.WQX)(se),this.followersOfGroupStore=(0,e.WQX)(ae),this.router=(0,e.WQX)(v.Ix),this.profileLoadHelperService=(0,e.WQX)(x.p),this.columns=["first_name","last_name","actions"],this.activeItemIndex=0,this.showFollowers=!0,this.showFilter=!0,this.signal=e.vPA,this.combinedForm=this.formBuilder.group({filterStringForm:this.formBuilder.group({searchString:[]})}),this.combinedForm.valueChanges.subscribe(()=>this.onCombinedFormChange())}ngOnInit(){var t=this;return(0,a.A)(function*(){yield Promise.all([t.followersOfGroupStore.read(),t.followingsOfGroupStore.read()])})()}onNavigateToProfile(t){this.profileLoadHelperService.loadData(t),this.router.navigateByUrl("/profile/"+t)}onCombinedFormChange(){const t=this.combinedForm.get("filterStringForm")?.value.searchString;let r=!1;t&&(r=!0),this.showFollowers?this.followersOfGroupStore.setFilterState({filterByStringState:{filterByString:r,stringSearchKeys:["first_name_","last_name_"],searchString:t}}):this.followingsOfGroupStore.setFilterState({filterByStringState:{filterByString:r,stringSearchKeys:["first_name_","last_name_"],searchString:t}})}showFollowerList(){this.showFollowers=!0}showFollowingList(){this.showFollowers=!1}removeFollower(t){var r=this;return(0,a.A)(function*(){yield r.followersOfGroupStore.remove(t)})()}removeFollowing(t){var r=this;return(0,a.A)(function*(){yield r.followingsOfGroupStore.remove(t)})()}clearFilter(){this.combinedForm.reset(),this.showFollowers?this.followersOfGroupStore.resetFilterState():this.followingsOfGroupStore.resetFilterState()}toggleShowFilter(){this.showFilter=!this.showFilter,this.clearFilter()}static#e=this.\u0275fac=function(r){return new(r||o)(e.rXU(l.ok))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["polity-group-follow-edit"]],standalone:!0,features:[e.aNF],decls:11,vars:8,consts:[[3,"showFilter","dataCyTag","headline"],[3,"formGroup"],[3,"clearFilter"],[3,"activeItemIndexChange","activeItemIndex"],["tuiTab","",3,"click"],[3,"bonusKeys","dataCyTags","dataCyTagsHeadline","dataKeysForColumns","data","headings","isLoading","linkKey"],["placeholderText","Suche nach einem Vornamen","formGroupName","filterStringForm"],[3,"remove","openLink","bonusKeys","dataCyTags","dataCyTagsHeadline","dataKeysForColumns","data","headings","isLoading","linkKey"]],template:function(r,i){1&r&&(e.j41(0,"div")(1,"polity-filter-headline",0),e.bIt("showFilter",function(){return i.toggleShowFilter()}),e.k0s(),e.DNE(2,_e,2,1,"ng-container",1),e.j41(3,"polity-filter-clear",2),e.bIt("clearFilter",function(){return i.clearFilter()}),e.k0s()(),e.j41(4,"tui-tabs",3),e.mxI("activeItemIndexChange",function(d){return e.DH7(i.activeItemIndex,d)||(i.activeItemIndex=d),d}),e.j41(5,"button",4),e.bIt("click",function(){return i.showFollowerList()}),e.EFF(6," Followers "),e.k0s(),e.j41(7,"button",4),e.bIt("click",function(){return i.showFollowingList()}),e.EFF(8," Following "),e.k0s()(),e.DNE(9,me,1,13,"polity-table-three-icon-text-delete",5)(10,he,1,13,"polity-table-three-icon-text-delete",5)),2&r&&(e.R7$(),e.Y8G("dataCyTag","edit-follower-and-followings")("headline","Deine Follower & Followings"),e.R7$(),e.vxM(i.showFilter?2:-1),e.R7$(2),e.R50("activeItemIndex",i.activeItemIndex),e.R7$(),e.BMQ("data-cy","show-follower"),e.R7$(2),e.BMQ("data-cy","show-followings"),e.R7$(2),e.vxM(i.showFollowers?9:-1),e.R7$(),e.vxM(i.showFollowers?-1:10))},dependencies:[B.b,P.Y,j.f,l.X1,l.cb,l.j4,l.$R,A.X,_.J8,_.Qx,_.OV,_.vy]})}return o})();var Se=s(6414),ve=s(2237);const y=()=>["last_name_"],be=()=>["member_profile_image","member_first_name","member_remove"],ye=()=>["member_profile_image_headline","member_first_name_headline","member_remove_headline"],F=()=>["profile_image_","first_name_","id_"],X=()=>["Foto","Name","Entfernen"],Fe=()=>["group_invitation_image","group_invitation_name","group_invitation_accept"],we=()=>["group_invitation_image_headline","group_invitation_name_headline","group_request_withdraw_headline"],Ge=()=>["group_request_image","group_request_name","group_request_withdraw"],Ie=()=>["group_request_image_headline","group_request_name_headline","group_invitation_accept_headline"],Me=()=>["Foto","Name","Entscheiden"];function Ce(o,c){if(1&o&&(e.qex(0,1),e.nrm(1,"polity-filter-string",7),e.bVm()),2&o){const t=e.XpG();e.Y8G("formGroup",t.combinedForm)}}function Te(o,c){if(1&o){const t=e.RV6();e.j41(0,"polity-search-profiles-bar",8),e.bIt("onAddUserEmitter",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.onInviteUser(i))})("onCanceledUserIdEmitter",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.onCancelUserInvite(i))}),e.k0s()}}function Ee(o,c){if(1&o){const t=e.RV6();e.j41(0,"polity-table-three-icon-text-delete",9),e.bIt("remove",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.removeGroupMember(i))})("openLink",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.onNavigateToProfile(i))}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("bonusKeys",e.lJ4(8,y))("dataCyTags",e.lJ4(9,be))("dataCyTagsHeadline",e.lJ4(10,ye))("dataKeysForColumns",e.lJ4(11,F))("data",t.groupMemberStore.dataFiltered())("headings",e.lJ4(12,X))("isLoading",t.groupMemberStore.loadingState().loading)("linkKey","member_id_")}}function ke(o,c){if(1&o){const t=e.RV6();e.j41(0,"polity-table-three-icon-text-delete",9),e.bIt("remove",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.withdrawInvitation(i))})("openLink",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.onNavigateToProfile(i))}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("bonusKeys",e.lJ4(8,y))("dataCyTags",e.lJ4(9,Fe))("dataCyTagsHeadline",e.lJ4(10,we))("dataKeysForColumns",e.lJ4(11,F))("data",t.groupInvitationsStore.dataFiltered())("headings",e.lJ4(12,X))("isLoading",t.groupInvitationsStore.loadingState().loading)("linkKey","member_id_")}}function Re(o,c){if(1&o){const t=e.RV6();e.j41(0,"polity-table-three-icon-text-two-actions",10),e.bIt("firstAction",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.acceptMembershipRequest(i))})("secondAction",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.declineMembershipRequest(i))})("openLink",function(i){e.eBV(t);const n=e.XpG();return e.Njj(n.onNavigateToProfile(i))}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("bonusKeys",e.lJ4(13,y))("dataCyTags",e.lJ4(14,Ge))("dataCyTagsHeadline",e.lJ4(15,Ie))("dataKeysForColumns",e.lJ4(16,F))("data",t.groupRequestsStore.dataFiltered())("headings",e.lJ4(17,Me))("isLoading",t.groupRequestsStore.loadingState().loading)("firstActionIcon","tuiIconCheck")("secondActionIcon","tuiIconX")("firstActionText","Accept")("secondActionText","Decline")("secondActionDataCyTag","group_invitation_decline")("linkKey","member_id_")}}let Ae=(()=>{class o{constructor(t){this.formBuilder=t,this.groupStore=(0,e.WQX)(p.f),this.groupMemberStore=(0,e.WQX)(R),this.groupRequestsStore=(0,e.WQX)(k),this.router=(0,e.WQX)(v.Ix),this.groupInvitationsStore=(0,e.WQX)(E),this.profileLoadHelperService=(0,e.WQX)(x.p),this.columns=["first_name","last_name","actions"],this.activeItemIndex=0,this.showFilter=!0,this.showMembers=!0,this.showRequests=!1,this.showInvitations=!1,this.signal=e.vPA,this.combinedForm=this.formBuilder.group({filterStringForm:this.formBuilder.group({searchString:[]})}),this.combinedForm.valueChanges.subscribe(()=>this.onCombinedFormChange())}ngOnInit(){var t=this;return(0,a.A)(function*(){yield t.groupMemberStore.read()})()}onCombinedFormChange(){const t=this.combinedForm.get("filterStringForm")?.value.searchString;let r=!1;t&&(r=!0),this.showMembers?this.groupMemberStore.setFilterState({filterByStringState:{filterByString:r,stringSearchKeys:["first_name_","last_name_"],searchString:t}}):this.showRequests?this.groupRequestsStore.setFilterState({filterByStringState:{filterByString:r,stringSearchKeys:["first_name_","last_name_"],searchString:t}}):this.showInvitations&&this.groupInvitationsStore.setFilterState({filterByStringState:{filterByString:r,stringSearchKeys:["first_name_","last_name_"],searchString:t}})}onNavigateToProfile(t){this.profileLoadHelperService.loadData(t),this.router.navigateByUrl("/profile/"+t)}removeGroupMember(t){var r=this;return(0,a.A)(function*(){yield r.groupMemberStore.remove(t)})()}clearFilter(){this.combinedForm.reset(),this.showMembers?this.groupMemberStore.resetFilterState():this.showRequests?this.groupRequestsStore.resetFilterState():this.showInvitations&&this.groupInvitationsStore.resetFilterState()}toggleShowFilter(){this.showFilter=!this.showFilter,this.clearFilter()}showGroupMemberList(){this.groupMemberStore.read(),this.showInvitations=!1,this.showRequests=!1,this.showMembers=!0}showGroupRequestList(){this.groupRequestsStore.read(),this.showInvitations=!1,this.showMembers=!1,this.showRequests=!0}showGroupInvitationList(){this.groupInvitationsStore.read(),this.showMembers=!1,this.showRequests=!1,this.showInvitations=!0}withdrawInvitation(t){var r=this;return(0,a.A)(function*(){yield r.groupInvitationsStore.remove(t)})()}acceptMembershipRequest(t){var r=this;return(0,a.A)(function*(){yield r.groupRequestsStore.accept(t)})()}declineMembershipRequest(t){var r=this;return(0,a.A)(function*(){yield r.groupRequestsStore.deleteById(t)})()}onInviteUser(t){const r=t[t.length-1];console.log("userId invite",r.id_),this.groupInvitationsStore.invite(r.id_)}onCancelUserInvite(t){this.groupInvitationsStore.removeByInviter(t.id_,this.groupStore.data().id_)}static#e=this.\u0275fac=function(r){return new(r||o)(e.rXU(l.ok))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["polity-group-member-edit"]],standalone:!0,features:[e.aNF],decls:15,vars:11,consts:[[3,"showFilter","dataCyTag","headline"],[3,"formGroup"],[3,"clearFilter"],[3,"activeItemIndexChange","activeItemIndex"],["tuiTab","",3,"click"],[3,"bonusKeys","dataCyTags","dataCyTagsHeadline","dataKeysForColumns","data","headings","isLoading","linkKey"],[3,"bonusKeys","dataCyTags","dataCyTagsHeadline","dataKeysForColumns","data","headings","isLoading","firstActionIcon","secondActionIcon","firstActionText","secondActionText","secondActionDataCyTag","linkKey"],["placeholderText","Suche nach einem Vornamen","formGroupName","filterStringForm"],[3,"onAddUserEmitter","onCanceledUserIdEmitter"],[3,"remove","openLink","bonusKeys","dataCyTags","dataCyTagsHeadline","dataKeysForColumns","data","headings","isLoading","linkKey"],[3,"firstAction","secondAction","openLink","bonusKeys","dataCyTags","dataCyTagsHeadline","dataKeysForColumns","data","headings","isLoading","firstActionIcon","secondActionIcon","firstActionText","secondActionText","secondActionDataCyTag","linkKey"]],template:function(r,i){1&r&&(e.j41(0,"div")(1,"polity-filter-headline",0),e.bIt("showFilter",function(){return i.toggleShowFilter()}),e.k0s(),e.DNE(2,Ce,2,1,"ng-container",1),e.j41(3,"polity-filter-clear",2),e.bIt("clearFilter",function(){return i.clearFilter()}),e.k0s()(),e.DNE(4,Te,1,0,"polity-search-profiles-bar"),e.j41(5,"tui-tabs",3),e.mxI("activeItemIndexChange",function(d){return e.DH7(i.activeItemIndex,d)||(i.activeItemIndex=d),d}),e.j41(6,"button",4),e.bIt("click",function(){return i.showGroupMemberList()}),e.EFF(7," Mitglieder "),e.k0s(),e.j41(8,"button",4),e.bIt("click",function(){return i.showGroupInvitationList()}),e.EFF(9," Gruppeneinladungen "),e.k0s(),e.j41(10,"button",4),e.bIt("click",function(){return i.showGroupRequestList()}),e.EFF(11," Mitgliedsanfragen "),e.k0s()(),e.DNE(12,Ee,1,13,"polity-table-three-icon-text-delete",5)(13,ke,1,13,"polity-table-three-icon-text-delete",5)(14,Re,1,18,"polity-table-three-icon-text-two-actions",6)),2&r&&(e.R7$(),e.Y8G("dataCyTag","edit-member-and-followings")("headline","Group Members"),e.R7$(),e.vxM(i.showFilter?2:-1),e.R7$(2),e.vxM(i.showInvitations?4:-1),e.R7$(),e.R50("activeItemIndex",i.activeItemIndex),e.R7$(),e.BMQ("data-cy","show-member"),e.R7$(2),e.BMQ("data-cy","show-group-invitations"),e.R7$(2),e.BMQ("data-cy","show-group-requests"),e.R7$(2),e.vxM(i.showMembers?12:-1),e.R7$(),e.vxM(i.showInvitations?13:-1),e.R7$(),e.vxM(i.showRequests?14:-1))},dependencies:[B.b,P.Y,j.f,l.YN,l.cb,l.X1,l.j4,l.$R,A.X,_.J8,_.Qx,_.OV,_.vy,Se.n,ve.r]})}return o})();var Be=s(2942),U=s(928),V=s(1991),Q=s(5143),W=s(5942),Pe=s(1888);const D=(0,s(9925).ET)(()=>o=>!o||o.includes("/")?o:`/assets/taiga-ui/icons/${o.includes("Outline")?o:o.replace("Large","").concat("Outline")}.svg`);let xe=(()=>{class o{constructor(t){this.resolver=t,this.icon="",this.background=""}}return o.\u0275fac=function(t){return new(t||o)(e.rXU(D))},o.\u0275cmp=e.VBU({type:o,selectors:[["tui-icon"]],hostVars:6,hostBindings:function(t,r){2&t&&(e.xc7("--t-mask","url("+r.resolver(r.icon)+")")("--t-mask-bg",r.background?"url("+r.resolver(r.background).replace("Outline","")+")":null),e.AVh("_duo",r.background))},inputs:{icon:"icon",background:"background"},decls:0,vars:0,template:function(t,r){},styles:['[_nghost-%COMP%]{position:relative;display:inline-block;width:1em;height:1em;font-size:1.5rem;flex-shrink:0;vertical-align:middle}._duo[_nghost-%COMP%]{-webkit-mask:var(--t-mask-bg) no-repeat center / contain;mask:var(--t-mask-bg) no-repeat center / contain}[_nghost-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";-webkit-mask:var(--t-mask) no-repeat center / contain;mask:var(--t-mask) no-repeat center / contain;background:currentColor}'],changeDetection:0}),o})(),$=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({}),o})(),Le=(()=>{class o{constructor(t){this.router=t,this.isLoading=(0,e.hFB)(!1),this.title=e.hFB.required(),this.dataCyTag=(0,e.hFB)("icon-link-card"),this.iconName=e.hFB.required(),this.url=e.hFB.required()}onClick(){var t=this;return(0,a.A)(function*(){yield t.router.navigateByUrl(t.url())})()}static#e=this.\u0275fac=function(r){return new(r||o)(e.rXU(v.Ix))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["polity-icon-link-card"]],inputs:{isLoading:[1,"isLoading"],title:[1,"title"],dataCyTag:[1,"dataCyTag"],iconName:[1,"iconName"],url:[1,"url"]},standalone:!0,features:[e.aNF],decls:4,vars:7,consts:[["tuiCardLarge","","tuiCell","","tuiSurface","elevated",1,"full-width",3,"click"],[3,"icon"],["tuiTitle",""]],template:function(r,i){1&r&&(e.j41(0,"button",0),e.bIt("click",function(){return i.onClick()}),e.nrm(1,"tui-icon",1),e.j41(2,"div",2),e.EFF(3),e.k0s()()),2&r&&(e.R7$(),e.xc7("color","var(--tui-primary)"),e.FS9("icon",i.iconName()),e.R7$(),e.AVh("tui-skeleton",i.isLoading()),e.BMQ("data-cy","group-paragraph"),e.R7$(),e.SpI(" ",i.title()," "))},dependencies:[Be.SA,U.FT,U.PO,V.xk,V.cK,Q.sD,Q.TB,W.zr,W.yn,Pe.d,$,xe],styles:[".title[_ngcontent-%COMP%]{font:var(--tui-font-heading-4);margin:2px}.title_size_s[_ngcontent-%COMP%]{font:var(--tui-font-heading-6)}"]})}return o})(),Ne=(()=>{class o{constructor(){this.groupStore=(0,e.WQX)(p.f),this.editGroupUrl="",this.editGroupFollowerUrl="",this.editGroupMemberUrl=""}ngOnInit(){const t=this.groupStore.data().id_;this.editGroupUrl="group/"+t+"/settings/edit",this.editGroupMemberUrl="group/"+t+"/member/edit",this.editGroupFollowerUrl="group/"+t+"/follower/edit"}static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["polity-group-overview-edit"]],standalone:!0,features:[e.aNF],decls:8,vars:10,consts:[[1,"tui-space_top-3"],[3,"iconName","title","url"]],template:function(r,i){1&r&&(e.j41(0,"h1"),e.EFF(1," Gruppen Management.\n"),e.k0s(),e.j41(2,"div",0),e.nrm(3,"polity-icon-link-card",1),e.k0s(),e.j41(4,"div",0),e.nrm(5,"polity-icon-link-card",1),e.k0s(),e.j41(6,"div",0),e.nrm(7,"polity-icon-link-card",1),e.k0s()),2&r&&(e.BMQ("data-cy","home-instruction"),e.R7$(3),e.Y8G("iconName","tuiIconEdit2")("title","Edit Group settings")("url",i.editGroupUrl),e.R7$(2),e.Y8G("iconName","tuiIconUsers")("title","Edit Group Member")("url",i.editGroupMemberUrl),e.R7$(2),e.Y8G("iconName","tuiIconUsers")("title","Edit Group Follower")("url",i.editGroupFollowerUrl))},dependencies:[Le,$]})}return o})();var Xe=s(9165),q=s(6686),O=s(4350),w=s(7440),J=s(378),G=s(2180);const K=()=>[];function Ue(o,c){1&o&&e.nrm(0,"tui-svg",10)}let Ve=(()=>{class o{constructor(){this.group=e.hFB.required(),this.loadingState=e.hFB.required(),this.newGroupData=(0,e.CGW)(),this.editGroupForm=new l.gE({name:new l.MJ("",l.k0.required),description:new l.MJ("",l.k0.required)}),(0,e.QZP)(()=>{this.editGroupForm.patchValue({name:this.group().name_,description:this.group().description_})})}onEdit(){var t=this;return(0,a.A)(function*(){const r={name_:t.editGroupForm.value.name,description_:t.editGroupForm.value.description};console.log(r),t.newGroupData.emit(r)})()}static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["polity-group-edit-form"]],inputs:{group:[1,"group"],loadingState:[1,"loadingState"]},outputs:{newGroupData:"newGroupData"},standalone:!0,features:[e.aNF],decls:20,vars:30,consts:[["success",""],[3,"ngSubmit","formGroup"],[1,"tui-form__header"],[1,"tui-form__row"],["formControlName","name","tuiHintContent","Enter a new name",3,"tuiTextfieldCleaner","tuiTextfieldCustomContent"],["formControlName","name",3,"error"],["formControlName","description","tuiHintContent","Enter a description",3,"tuiTextfieldCleaner","tuiTextfieldCustomContent"],["formControlName","description",3,"error"],[1,"tui-form__buttons"],["size","l","tuiButton","","type","submit",1,"tui-form__button",3,"disabled"],["src","tuiIconCheck",1,"polity-success","tui-space_left-3"]],template:function(r,i){if(1&r){const n=e.RV6();e.j41(0,"form",1),e.bIt("ngSubmit",function(){return e.eBV(n),e.Njj(i.onEdit())}),e.j41(1,"h3",2),e.EFF(2,"\xc4ndere deine Profil Daten"),e.k0s(),e.j41(3,"div",3)(4,"tui-input",4),e.EFF(5," Gebe deinen Vornamen ein "),e.k0s(),e.nrm(6,"tui-error",5),e.nI1(7,"tuiFieldError"),e.nI1(8,"async"),e.k0s(),e.j41(9,"div",3)(10,"tui-input",6),e.EFF(11," Gebe deinen Nachnamen ein "),e.k0s(),e.nrm(12,"tui-error",7),e.nI1(13,"tuiFieldError"),e.nI1(14,"async"),e.k0s(),e.j41(15,"div",8)(16,"button",9),e.EFF(17," \xc4NDERN "),e.k0s()(),e.DNE(18,Ue,1,0,"ng-template",null,0,e.C5r),e.k0s()}if(2&r){const n=e.sdS(19);e.Y8G("formGroup",i.editGroupForm),e.R7$(),e.AVh("tui-skeleton",i.loadingState().loading),e.BMQ("data-cy","edit-instruction"),e.R7$(3),e.AVh("tui-skeleton",i.loadingState().loading),e.Y8G("tuiTextfieldCleaner",!0)("tuiTextfieldCustomContent",i.editGroupForm.controls.name.valid?n:""),e.BMQ("data-cy","name"),e.R7$(2),e.Y8G("error",e.bMT(8,22,e.bMT(7,20,e.lJ4(28,K)))),e.R7$(4),e.AVh("tui-skeleton",i.loadingState().loading),e.Y8G("tuiTextfieldCleaner",!0)("tuiTextfieldCustomContent",i.editGroupForm.controls.description.valid?n:""),e.BMQ("data-cy","description"),e.R7$(2),e.Y8G("error",e.bMT(14,26,e.bMT(13,24,e.lJ4(29,K)))),e.R7$(4),e.AVh("tui-skeleton",i.loadingState().loading),e.Y8G("disabled",!i.editGroupForm.valid),e.BMQ("data-cy","update")}},dependencies:[T.Jj,l.YN,l.qT,l.BC,l.cb,l.X1,l.j4,l.JD,m.Pv,m.SM,q.F,q.u,J.Hi,J.bs,G.zi,G.mp,G.Ws,O.vl,O._Y,w.CN,w.np,w.Rd]})}return o})();const Qe=[{path:"",component:ne},{path:"edit",component:Ne,canActivate:[b]},{path:"follower/edit",component:fe,canActivate:[b]},{path:"member/edit",component:Ae,canActivate:[b]},{path:"settings/edit",component:(()=>{class o{constructor(){this.groupStore=(0,e.WQX)(p.f)}onEdit(t){var r=this;return(0,a.A)(function*(){yield r.groupStore.update(t)})()}onUpdateGroupImage(t){var r=this;return(0,a.A)(function*(){yield r.groupStore.update({img_url_:t})})()}static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["polity-group-edit"]],standalone:!0,features:[e.aNF],decls:8,vars:7,consts:[[1,"polity-space_bottom-15"],[3,"newGroupData","group","loadingState"],[1,""],[1,"tui-form__header"],[3,"imgStoragePath","bucketName","imgSrc","loadingState"]],template:function(r,i){1&r&&(e.j41(0,"div",0)(1,"polity-group-edit-form",1),e.bIt("newGroupData",function(d){return i.onEdit(d)}),e.k0s()(),e.nrm(2,"hr"),e.j41(3,"div",2)(4,"h3",3),e.EFF(5,"\xc4ndere deine Profil Bild"),e.k0s(),e.j41(6,"polity-image-upload",4),e.bIt("imgStoragePath",function(d){return i.onUpdateGroupImage(d)}),e.k0s()(),e.nrm(7,"hr")),2&r&&(e.R7$(),e.Y8G("group",i.groupStore.data())("loadingState",i.groupStore.loadingState()),e.R7$(3),e.AVh("tui-skeleton",i.groupStore.loadingState().loading),e.R7$(2),e.Y8G("bucketName","group_images")("imgSrc",i.groupStore.data().img_url_)("loadingState",i.groupStore.loadingState()))},dependencies:[Xe.W,Ve]})}return o})(),canActivate:[b]}]}}]);